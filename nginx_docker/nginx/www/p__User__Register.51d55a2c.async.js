(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[60],{"5WY0":function(e,a,r){e.exports={main:"antd-pro-pages-user-register-main",getCaptcha:"antd-pro-pages-user-register-getCaptcha",submit:"antd-pro-pages-user-register-submit",login:"antd-pro-pages-user-register-login",error:"antd-pro-pages-user-register-error",success:"antd-pro-pages-user-register-success",warning:"antd-pro-pages-user-register-warning","progress-pass":"antd-pro-pages-user-register-progress-pass",progress:"antd-pro-pages-user-register-progress"}},cq3J:function(e,a,r){"use strict";r.r(a);r("KbV2");var t,s,i,n,o=r("I+kI"),l=(r("mofY"),r("HZOl")),c=(r("VNgh"),r("ohkJ")),d=(r("Z3A/"),r("pB2J")),m=r("mK77"),p=r.n(m),g=r("43Yg"),u=r.n(g),f=r("/tCh"),h=r.n(f),v=r("scpF"),b=r.n(v),E=r("O/V9"),w=r.n(E),M=r("8aBX"),y=r.n(M),O=(r("PCp+"),r("HnZV")),j=(r("RmDK"),r("/6XP")),k=(r("YyIT"),r("2pDd")),q=r("uqIC"),F=r.n(q),S=r("LneV"),P=r("QHZv"),C=r("nV4c"),N=r.n(C),x=r("7xWr"),z=r.n(x),V=r("5WY0"),D=r.n(V),I=k["a"].Item,J=j["a"].Option,W=O["a"].Group,Y={ok:F.a.createElement("div",{className:D.a.success},F.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.strong"})),pass:F.a.createElement("div",{className:D.a.warning},F.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.medium"})),poor:F.a.createElement("div",{className:D.a.error},F.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.short"}))},T={ok:"success",pass:"normal",poor:"exception"},Z=(t=Object(S["connect"])(function(e){var a=e.register,r=e.loading;return{register:a,submitting:r.effects["register/submit"]}}),s=k["a"].create(),t(i=s((n=function(e){function a(){var e,r;u()(this,a);for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return r=b()(this,(e=w()(a)).call.apply(e,[this].concat(s))),r.state={count:0,confirmDirty:!1,visible:!1,help:"",prefix:"86"},r.onGetCaptcha=function(){var e=59;r.setState({count:e}),r.interval=setInterval(function(){e-=1,r.setState({count:e}),0===e&&clearInterval(r.interval)},1e3)},r.getPasswordStatus=function(){var e=r.props.form,a=e.getFieldValue("password");return a&&a.length>9?"ok":a&&a.length>5?"pass":"poor"},r.handleSubmit=function(e){e.preventDefault();var a=r.props,t=a.form,s=a.dispatch;t.validateFields({force:!0},function(e,a){if(!e){var t=r.state.prefix;s({type:"register/submit",payload:{data:{info:p()({},a,{prefix:t})}},callback:function(e){var a=e.msg,r=e.code;"200"===r?(d["a"].success("Register Success"),setTimeout(function(){z.a.push({pathname:"/user/login"})},3e3)):d["a"].error("error:".concat(a))}})}})},r.handleConfirmBlur=function(e){var a=e.target.value,t=r.state.confirmDirty;r.setState({confirmDirty:t||!!a})},r.checkConfirm=function(e,a,t){var s=r.props.form;a&&a!==s.getFieldValue("password")?t(Object(P["formatMessage"])({id:"validation.password.twice"})):t()},r.checkPassword=function(e,a,t){var s=r.state,i=s.visible,n=s.confirmDirty;if(a)if(r.setState({help:""}),i||r.setState({visible:!!a}),a.length<6)t("error");else{var o=r.props.form;a&&n&&o.validateFields(["confirm"],{force:!0}),t()}else r.setState({help:Object(P["formatMessage"])({id:"validation.password.required"}),visible:!!a}),t("error")},r.changePrefix=function(e){r.setState({prefix:e})},r.renderPasswordProgress=function(){var e=r.props.form,a=e.getFieldValue("password"),t=r.getPasswordStatus();return a&&a.length?F.a.createElement("div",{className:D.a["progress-".concat(t)]},F.a.createElement(c["a"],{status:T[t],className:D.a.progress,strokeWidth:6,percent:10*a.length>100?100:10*a.length,showInfo:!1})):null},r}return y()(a,e),h()(a,[{key:"componentDidUpdate",value:function(){var e=this.props,a=e.form,r=e.register,t=a.getFieldValue("mail");"ok"===r.status&&z.a.push({pathname:"/user/register-result",state:{account:t}})}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props,a=e.form,r=e.submitting,t=a.getFieldDecorator,s=this.state,i=(s.count,s.prefix),n=s.help,c=s.visible;return F.a.createElement("div",{className:D.a.main},F.a.createElement("h3",null,F.a.createElement(P["FormattedMessage"],{id:"app.register.register"})),F.a.createElement(k["a"],{onSubmit:this.handleSubmit},F.a.createElement(I,null,t("name",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.tenant.required"})}]})(F.a.createElement(O["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.tenant.placeholder"})}))),F.a.createElement(I,null,t("address",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.address.required"})}]})(F.a.createElement(O["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.address.placeholder"})}))),F.a.createElement(I,null,t("description",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.description.required"})}]})(F.a.createElement(O["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.description.placeholder"})}))),F.a.createElement(I,null,t("username",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.userName.required"})}]})(F.a.createElement(O["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.userName.placeholder"})}))),F.a.createElement(I,null,t("email",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.email.required"})},{type:"email",message:Object(P["formatMessage"])({id:"validation.email.wrong-format"})}]})(F.a.createElement(O["a"],{size:"large",placeholder:Object(P["formatMessage"])({id:"form.email.placeholder"})}))),F.a.createElement(I,{help:n},F.a.createElement(l["a"],{getPopupContainer:function(e){return e.parentNode},content:F.a.createElement("div",{style:{padding:"4px 0"}},Y[this.getPasswordStatus()],this.renderPasswordProgress(),F.a.createElement("div",{style:{marginTop:10}},F.a.createElement(P["FormattedMessage"],{id:"validation.password.strength.msg"}))),overlayStyle:{width:240},placement:"right",visible:c},t("password",{rules:[{validator:this.checkPassword}]})(F.a.createElement(O["a"],{size:"large",type:"password",placeholder:Object(P["formatMessage"])({id:"form.password.placeholder"})})))),F.a.createElement(I,null,t("confirm",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.confirm-password.required"})},{validator:this.checkConfirm}]})(F.a.createElement(O["a"],{size:"large",type:"password",placeholder:Object(P["formatMessage"])({id:"form.confirm-password.placeholder"})}))),F.a.createElement(I,null,F.a.createElement(W,{compact:!0},F.a.createElement(j["a"],{size:"large",value:i,onChange:this.changePrefix,style:{width:"20%"}},F.a.createElement(J,{value:"86"},"+86")),t("tel",{rules:[{required:!0,message:Object(P["formatMessage"])({id:"validation.phone-number.required"})},{pattern:/^\d{11}$/,message:Object(P["formatMessage"])({id:"validation.phone-number.wrong-format"})}]})(F.a.createElement(O["a"],{size:"large",style:{width:"80%"},placeholder:Object(P["formatMessage"])({id:"form.phone-number.placeholder"})})))),F.a.createElement(I,null,F.a.createElement(o["a"],{size:"large",loading:r,className:D.a.submit,type:"primary",htmlType:"submit"},F.a.createElement(P["FormattedMessage"],{id:"app.register.register"})),F.a.createElement(N.a,{className:D.a.login,to:"/User/Login"},F.a.createElement(P["FormattedMessage"],{id:"app.register.sign-in"})))))}}]),a}(q["Component"]),i=n))||i)||i);a["default"]=Z}}]);