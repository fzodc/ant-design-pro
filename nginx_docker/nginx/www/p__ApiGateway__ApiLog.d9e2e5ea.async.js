(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"3WuQ":function(e,t,a){"use strict";a.r(t);a("KbV2");var r,i,n,l,o=a("I+kI"),p=(a("ssvk"),a("Qo4C")),s=(a("PCp+"),a("HnZV")),c=a("zAuD"),d=a.n(c),u=(a("Z3A/"),a("pB2J")),x=(a("mofY"),a("HZOl")),m=(a("85xf"),a("IYgN")),f=a("rXjv"),h=a.n(f),E=a("43Yg"),y=a.n(E),R=a("/tCh"),v=a.n(R),O=a("scpF"),g=a.n(O),w=a("O/V9"),q=a.n(w),b=a("8aBX"),T=a.n(b),I=(a("YyIT"),a("2pDd")),k=(a("RmDK"),a("/6XP")),C=a("uqIC"),V=a.n(C),B=a("7xWr"),F=a.n(B),P=a("LneV"),L=a("WnAZ"),j=a("zHco"),A=a("gcl2"),S=a.n(A),N=a("WCBp"),_=a("nPZ7"),M=a("MMK4"),z=k["a"].Option,W=["front","back","backAttr"],K={pathType:"pathType",extReqOne:"extReqOne",extReqTwo:"extReqTwo",extReqThree:"extReqThree",extRspOne:"extRspOne",extRspTwo:"extRspTwo",extRspThree:"extRspThree",logLevel:"logLevel",secretFlag:"secretFlag"},D=(r=Object(P["connect"])(function(e){var t=e.apiCreateModel,a=e.loading;return{apiService:t.apiService,submitting:a.effects["apiCreateModel/submitStepForm"]}}),i=I["a"].create(),r(n=i((l=function(e){function t(){var e,a;y()(this,t);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return a=g()(this,(e=q()(t)).call.apply(e,[this].concat(i))),a.state={width:"100%",apiOrderExt:{}},a.getApi=function(e){var t=a.props.dispatch;if(-1!==e){var r={option:4,range:1,data:{}};r.data.info={},r.data.info.apiId=e,t({type:"apiCreateModel/apiInfo",payload:r,callback:function(e){a.setBaseInfo(e,t)}})}else F.a.push("/exception/403")},a.setBaseInfo=function(e){var t=e.data,r=t.apiOrderExt;a.setState({apiOrderExt:r})},a.getErrorInfo=function(){var e=[];W.forEach(function(t){var r=a.getErrorInfoByPrefixList(t)||[];e.push.apply(e,h()(r))});var t=a.getErrorInfoByPrefix(e);return t},a.getErrorInfoByPrefixList=function(e){var t=a.props.form.getFieldError,r=t(e);if(!r)return null;var i=Object.keys(r).filter(function(e){return r[e]}).length;if(0===i)return null;var n=function(t){var a="".concat(e,".").concat(t),r=document.querySelector('label[for="'.concat(a,'"]'));r&&r.scrollIntoView(!0)},l=Object.keys(r).map(function(e){return r[e]?V.a.createElement("li",{key:e,className:S.a.errorListItem,onClick:function(){return n(e)}},V.a.createElement(m["a"],{type:"cross-circle-o",className:S.a.errorIcon}),V.a.createElement("div",{className:S.a.errorMessage},r[e][0]),V.a.createElement("div",{className:S.a.errorField},K.front[e])):null})||[];return l.filter(function(e){return null!==e})},a.getErrorInfoByPrefix=function(e){var t=e?e.length:0;return 0===t?null:V.a.createElement("span",{className:S.a.errorIcon},V.a.createElement(x["a"],{title:"\u8868\u5355\u6821\u9a8c\u4fe1\u606f",content:e,overlayClassName:S.a.errorPopover,trigger:"click",getPopupContainer:function(e){return e.parentNode}},V.a.createElement(m["a"],{type:"exclamation-circle"})),t)},a.validate=function(){var e=a.props,t=e.form.validateFieldsAndScroll,r=e.apiService,i=e.dispatch;t(function(e,t){if(!e){console.log("==========api update submit values:",t);var n=Object(_["g"])(r,t);console.log("api update submit apiInfo:",n),i({type:"apiCreateModel/submitStepForm",payload:n,callback:function(e){u["a"].success("Submit finished!",6),a.setBaseInfo(e,i)}})}})},a.getOptionWhithList=function(e){return!e||e.length<1?V.a.createElement(z,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return V.a.createElement(z,{key:e.itemCode,value:e.itemCode},e.itemValue)})},a.resizeFooterToolbar=function(){requestAnimationFrame(function(){var e=document.querySelectorAll(".ant-layout-sider")[0];if(e){var t="calc(100% - ".concat(e.style.width,")"),r=a.state.width;r!==t&&a.setState({width:t})}})},a}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0});var e=this.props.location,t=e.state,a=t||{apiId:105},r=a.apiId;this.getApi(r)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"getOption",value:function(e,t){var a=Object(M["d"])(e,t);return this.getOptionWhithList(a)}},{key:"render",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.submitting,r=this.state,i=r.width,n=r.apiOrderExt,l="body",c="",u="body",x="",m="body",f="",h="body",E="",y="body",R="",v="body",O="";n&&(l=n.extReq1?n.extReq1.split("::")[0]:l,c=n.extReq1?n.extReq1.split("::")[1]:"",u=n.extReq2?n.extReq2.split("::")[0]:u,x=n.extReq2?n.extReq2.split("::")[1]:"",m=n.extReq3?n.extReq3.split("::")[0]:m,f=n.extReq3?n.extReq3.split("::")[1]:"",h=n.extRsp1?n.extRsp1.split("::")[0]:h,E=n.extRsp1?n.extRsp1.split("::")[1]:"",y=n.extRsp2?n.extRsp2.split("::")[0]:y,R=n.extRsp2?n.extRsp2.split("::")[1]:"",v=n.extRsp3?n.extRsp3.split("::")[0]:v,O=n.extRsp3?n.extRsp3.split("::")[1]:"");var g=t("apiOrderExt.extReqOnePrefix",{initialValue:l})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),w=t("apiOrderExt.extReqTwoPrefix",{initialValue:u})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),q=t("apiOrderExt.extReqThreePrefix",{initialValue:m})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),b=t("apiOrderExt.extRspOnePrefix",{initialValue:h})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),T=t("apiOrderExt.extRspTwoPrefix",{initialValue:y})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),C=t("apiOrderExt.extRspThreePrefix",{initialValue:v})(V.a.createElement(k["a"],{style:{width:95}},this.getOption("apiOrderExt","query_type"))),B={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},F={wrapperCol:{xs:{span:24,offset:0},sm:{span:6}}};return V.a.createElement(j["a"],{onBack:function(){return window.history.back()},style:{height:"50px"},title:"Api Update"},V.a.createElement(p["a"],{className:S.a.card,bordered:!1},V.a.createElement(I["a"],B,V.a.createElement(I["a"].Item,d()({label:K.pathType},F),t("apiOrderExt.pathType",{initialValue:n?n.pathType:null,rules:[{required:!0,message:"please choose path type."}]})(V.a.createElement(N["a"],{javaCode:"apiOrderExt",javaKey:"path_type"}))),V.a.createElement(I["a"].Item,d()({label:K.extReqOne},F),t("apiOrderExt.extReqOne",{initialValue:c})(V.a.createElement(s["a"],{addonBefore:g,placeholder:"please enter extReqOne"}))),V.a.createElement(I["a"].Item,d()({label:K.extReqTwo},F),t("apiOrderExt.extReqTwo",{initialValue:x})(V.a.createElement(s["a"],{addonBefore:w,placeholder:"please enter extReqTwo"}))),V.a.createElement(I["a"].Item,d()({label:K.extReqThree},F),t("apiOrderExt.extReqThree",{initialValue:f})(V.a.createElement(s["a"],{addonBefore:q,placeholder:"please enter extReqThree"}))),V.a.createElement(I["a"].Item,d()({label:K.extRspOne},F),t("apiOrderExt.extRspOne",{initialValue:E})(V.a.createElement(s["a"],{addonBefore:b,placeholder:"please enter extRspOne"}))),V.a.createElement(I["a"].Item,d()({label:K.extRspTwo},F),t("apiOrderExt.extRspTwo",{initialValue:R})(V.a.createElement(s["a"],{addonBefore:T,placeholder:"please enter extRspTwo"}))),V.a.createElement(I["a"].Item,d()({label:K.extRspThree},F),t("apiOrderExt.extRspThree",{initialValue:O})(V.a.createElement(s["a"],{addonBefore:C,placeholder:"please enter extRspThree"}))),V.a.createElement(I["a"].Item,d()({label:K.logLevel},F),t("apiOrderExt.logLevel",{initialValue:n?n.logLevel:"1",rules:[{required:!0,message:"please choose log level."}]})(V.a.createElement(N["a"],{javaCode:"apiOrderExt",javaKey:"log_level"}))),V.a.createElement(I["a"].Item,d()({label:K.secretFlag},F),t("apiOrderExt.secretFlag",{initialValue:n?n.secretFlag:"1",rules:[{required:!0,message:"please choose secret flag."}]})(V.a.createElement(N["a"],{javaCode:"apiOrderExt",javaKey:"secret_flag"}))))),V.a.createElement(L["a"],{style:{width:i},extra:this.getErrorInfo(),extra2:""},V.a.createElement(o["a"],{style:{width:220},type:"primary",onClick:this.validate,loading:a},"\u63d0\u4ea4"),V.a.createElement(o["a"],{style:{width:220},onClick:function(){return window.history.back()}},"\u8fd4\u56de")))}}]),t}(C["PureComponent"]),n=l))||n)||n);t["default"]=D}}]);