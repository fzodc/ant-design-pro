(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[57],{"9NlH":function(e,t,a){"use strict";a.r(t);a("rTtu");var s,n,r,o=a("jksg"),i=a("43Yg"),l=a.n(i),d=a("/tCh"),u=a.n(d),c=a("scpF"),m=a.n(c),p=a("O/V9"),f=a.n(p),y=a("8aBX"),h=a.n(y),b=a("uqIC"),g=a.n(b),j=a("LneV"),O=a("QHZv"),w=a("Oia7"),R=a("sxfj"),v=a("zHco"),M=a("MMK4"),_=a("dxvr"),H=a("HZnN"),k=a("34ay"),S=H["a"].check,E=(s=Object(j["connect"])(function(e){var t=e.uniComp,a=e.loading;return{uniComp:t,loading:a.models.uniComp}}),s((r=function(e){function t(){var e,a;l()(this,t);for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return a=m()(this,(e=f()(t)).call.apply(e,[this].concat(n))),a.state={selectedRow:void 0,modalVisible:!1,columnSchemas:{}},a.handleRole=function(){var e=a.state.selectedRow;e&&a.setState({modalVisible:!0})},a.handleVisible=function(e){a.setState({modalVisible:e})},a.handleRefreshData=function(){a.child.handleSearchDefault()},a.handleRef=function(e){a.child=e},a.handleDown=function(){var e=a.state.selectedRow,t=e.id,s=Object(k["f"])(),n="/server/baseInfo/statement/user?userId=".concat(t),r=new XMLHttpRequest;r.open("GET",n,!0),r.setRequestHeader("Content-type","application/json"),r.setRequestHeader("Authorization","Bearer ".concat(s)),r.send(),r.responseType="blob",r.onload=function(){var e=this.response,t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var t=document.createElement("a");t.download="user_config.sql",t.href=e.target.result,document.body.appendChild(t),t.click()}}},a}return h()(t,e),u()(t,[{key:"componentWillMount",value:function(){var e=Object(M["d"])("common","status"),t=Object(M["d"])("sysUser","utype");console.log("------utypeList",t,e);var a=Object(k["a"])("user_save"),s=S(a,"Modify"),n=S(a,"Role"),r=Object(k["g"])(),o=Object(k["h"])(),i=!("super_admin"!==o&&"super_manager"!==o),l=s||n?{title:"action",width:200,saveAct:s,commandAct:n,havePermissions:!0,haveAddPermissions:!0}:{havePermissions:!1,haveAddPermissions:!1},d="0,1",u={userId:r,orgType:d},c={tableName:"sys_user",key:"id",name:"username",relationKey:"userId",commands:[{action:"setRole",title:"\u89d2\u8272"}],columnDetails:[{name:"id",title:Object(O["formatMessage"])({id:"app.user.sys_user.id"}),add:!0,disabledAct:"true"},{name:"username",title:Object(O["formatMessage"])({id:"app.user.sys_user.username"}),sorter:!0,query:!0,add:!0,detailFlag:1},{name:"utype",title:Object(O["formatMessage"])({id:"app.user.sys_user.utype"}),columnHidden:!1,query:!0,add:!0,tag:"changeCommonSelect",enumData:t},{name:"roleName",title:Object(O["formatMessage"])({id:"app.user.sys_user.roleName"})},{name:"orgId",title:Object(O["formatMessage"])({id:"app.user.sys_user.org"}),tag:"OrgSelectView",add:!0,tagAttr:u,rules:[],columnHidden:!0},{name:"tokenExpireTime",title:Object(O["formatMessage"])({id:"app.user.sys_user.expireTime"}),add:!0,rules:[],columnHidden:!0},{name:"password",title:Object(O["formatMessage"])({id:"app.user.sys_user.password"}),tag:"passwordTag",add:!0,columnHidden:!0,detail:!1},{name:"email",title:Object(O["formatMessage"])({id:"app.user.sys_user.email"}),query:!1,add:!0,rules:[]},{name:"tel",title:Object(O["formatMessage"])({id:"app.user.sys_user.tel"}),query:!1,add:!0,rules:[]},{name:"tenantName",title:Object(O["formatMessage"])({id:"app.user.sys_user.tenantName"}),columnHidden:!i},{name:"tenantId",title:Object(O["formatMessage"])({id:"app.user.sys_user.tenantName"}),tag:"TenantSelectView",query:i,columnHidden:!0},{name:"status",title:Object(O["formatMessage"])({id:"app.user.sys_user.status"}),columnHidden:!1,query:!1,add:!0,tag:"commonSelect",enumData:e,addHidden:!0,rules:[]},{name:"remark",title:Object(O["formatMessage"])({id:"app.user.sys_user.remark"}),tag:"textArea",columnHidden:!0,add:!0,rows:3,rules:[]}],relations:[{name:"sysUserRoles",key:"id",title:Object(O["formatMessage"])({id:"app.user.sys_user.sysUserRoles"}),columnDetails:[{name:"id",title:Object(O["formatMessage"])({id:"app.user.sys_role.id"})},{name:"roleId",title:Object(O["formatMessage"])({id:"app.user.sys_user.roleId"})},{name:"roleName",title:Object(O["formatMessage"])({id:"app.user.sys_user.roleName"})}]}],actions:l};c.userId=r,this.setState({columnSchemas:c})}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalVisible,s=t.selectedRow,n=t.columnSchemas,r=Object(k["a"])("user_role"),i=S(r,"Modify"),l=i?g.a.createElement(R["a"],null,g.a.createElement(o["a"],{type:"vertical"}),g.a.createElement("a",{onClick:function(){return e.handleRole()}},"Role"),g.a.createElement(o["a"],{type:"vertical"}),g.a.createElement("a",{onClick:function(){return e.handleDown()}},"Download")):"";return g.a.createElement(v["a"],null,g.a.createElement(w["a"],{columnSchemas:n,onRef:this.handleRef,size:"middle",onRow:function(t){return{onMouseEnter:function(){e.setState({selectedRow:t})}}}},g.a.createElement("span",{id:"QueryCommand"},l)),g.a.createElement(_["a"],{title:"Grant authorization",modalVisible:a,onVisible:this.handleVisible,columnSchemas:n,selectedRow:s,onRefreshData:this.handleRefreshData,keyName:"roleId",relationName:"sysUserRoles"}))}}]),t}(b["PureComponent"]),n=r))||n);t["default"]=E}}]);