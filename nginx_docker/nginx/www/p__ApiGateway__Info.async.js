(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"+L/z":function(e,t,a){"use strict";a.r(t);a("ssvk");var n,r,l,o,i=a("Qo4C"),s=(a("KbV2"),a("I+kI")),c=(a("cZcT"),a("T+5x")),d=(a("4WAF"),a("Qfhr")),p=(a("PCp+"),a("HnZV")),u=a("mK77"),m=a.n(u),g=(a("Z3A/"),a("pB2J")),h=(a("YVuj"),a("KfNe")),f=(a("85xf"),a("IYgN")),y=(a("kQuL"),a("Ig54")),v=(a("xkj2"),a("8LEP")),E=a("43Yg"),I=a.n(E),b=a("/tCh"),S=a.n(b),w=a("scpF"),k=a.n(w),O=a("O/V9"),C=a.n(O),L=a("8aBX"),F=a.n(L),D=(a("RmDK"),a("/6XP")),M=(a("YyIT"),a("2pDd")),A=a("uqIC"),N=a.n(A),T=a("7xWr"),R=a.n(T),j=a("LneV"),K=a("a/LZ"),x=a.n(K),G=a("+wSg"),V=a("yKc7"),U=a.n(V),P=a("CkN6"),z=a("xNuS"),B=a("nNTM"),H=a.n(B),Y=a("DnsZ"),q=a("MMK4"),W=a("WCBp"),Z=a("34ay"),Q=a("Ijbp"),_=a("kmo5"),X=Y["a"].ACT,J=Y["a"].API_STATUS,$=M["a"].Item,ee=D["a"].Option,te=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},ae=["default","processing","success","default","error"],ne=Object(q["d"])("apiService","status"),re=ne.map(function(e){return{value:e.itemCode,text:e.itemValue}}),le=(n=Object(j["connect"])(function(e){var t=e.apiGatewayModel,a=e.groupModel,n=e.loading;return{apiGatewayModel:t,groupList:a.groupList,loading:n.models.apiGatewayModel}}),r=M["a"].create(),n(l=r((o=function(e){function t(){var e,a;I()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=k()(this,(e=C()(t)).call.apply(e,[this].concat(r))),a.state={expandForm:!1,selectedRows:[],formValues:{},pagination:{pageNo:1,pageSize:10},filtersArg:{},sorter:{},userId:null,appkeyOutbounds:[]},a.getColumns=Object(G["a"])(function(e){var t=[{title:"Id",dataIndex:"apiId"},{title:"API Name",dataIndex:"name",render:function(e,t){return N.a.createElement("a",{onClick:function(){return a.handleDetail(!0,t)}},N.a.createElement(z["a"],{length:15,tooltip:!0},e))}},{title:"Target System Name",dataIndex:"targetSystemName"},{title:"Group",dataIndex:"groupId",render:function(t){return N.a.createElement(A["Fragment"],null,Object(q["a"])(e,t)," ")}},{title:"URL Path",dataIndex:"requestUrl",render:function(e){return N.a.createElement(z["a"],{length:20,tooltip:!0},e)}},{title:"Status",dataIndex:"status",filters:re,render:function(e){return N.a.createElement(v["a"],{status:ae[e],text:Object(q["c"])(ne,e)})}},{title:"Update time",dataIndex:"updatedTime",sorter:!0,render:function(e){return N.a.createElement("span",null,x()(e).format("YYYY-MM-DD HH:mm:ss"))}}];return t},U.a),a.moreHandle=function(e,t){"handleUpdate"===e?a.handleUpdate(!0,t):"handleUpdateDoc"===e?a.handleUpdateDoc(!0,t):"handleDebug"===e?a.handleDebug(!0,t):"handleLog"===e?a.handleLog(!0,t):"handleOffline"===e?a.handleStatusClick(X.OFFLINE,t):"handleDelete"===e&&a.handleStatusClick(X.DEL,t)},a.renderMoreBtn=function(e){var t=e.current,n=t.status;return N.a.createElement(h["a"],{overlay:N.a.createElement(y["b"],{onClick:function(e){var n=e.key;return a.moreHandle(n,t)}},N.a.createElement(y["b"].Item,{key:"handleUpdate"},"Modify"),N.a.createElement(y["b"].Item,{key:"handleUpdateDoc"},"API doc"),N.a.createElement(y["b"].Item,{key:"handleDebug"},"Debug"),N.a.createElement(y["b"].Item,{key:"handleLog"},"Set Log"),n===J.ONLINE?N.a.createElement(y["b"].Item,{key:"handleOffline"},"Offline"):null,n===J.OFFLINE?N.a.createElement(y["b"].Item,{key:"handleDelete"},"Remove"):null)},N.a.createElement("a",null,"More ",N.a.createElement(f["a"],{type:"down"})))},a.getOption=function(e,t,a){return!e||e.length<1?N.a.createElement(ee,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return N.a.createElement(ee,{key:e[t],value:e[t]},e[a])})},a.respDeal=function(e){var t=e.code,n=e.msg;if("200"===t){n&&""!==n||(n="Success."),g["a"].success(n),a.setState({selectedRows:[]});var r=a.state,l=r.pagination,o=r.filtersArg,i=r.sorter;a.handleStandardTableChange(l,o,i)}else g["a"].error("error:".concat(n))},a.conversionFilter=function(e){return Object.keys(e).reduce(function(t,a){var n=m()({},t);return n[a]=te(e[a]),n},{})},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,l=a.state,o=l.formValues,i=l.userId;a.setState({pagination:e,filtersArg:t,sorter:n});var s=a.conversionFilter(t),c=m()({pageNo:e.current,pageSize:e.pageSize},o,s);n.field&&(c.sorter="".concat(n.field,"_").concat(n.order));var d={userId:i,data:{}};d.data.info=m()({pageNo:1,pageSize:10},c),d.data.info.pageNo=d.data.info.pageNo?d.data.info.pageNo:1,r({type:"apiGatewayModel/callList",payload:d})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}});var r=a.state.userId,l={userId:r,data:{}};l.data.info={pageNo:1,pageSize:10},n({type:"apiGatewayModel/callList",payload:l})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleStatusClick=function(e,t){var n=a.props.dispatch,r={data:{}};r.data.info={},r.option=parseInt(e,10),r.data.info.apiIds=[t.apiId],console.log("-----:",r,e),n({type:"apiGatewayModel/apiStatusBatch",payload:r,callback:function(e){a.respDeal(e,n)}})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=m()({},t);console.log(t,r),a.setState({formValues:r});var l=a.state,o=l.filtersArg,i=l.sorter,s=l.userId,c=a.conversionFilter(o),d={userId:s,data:{}};d.data.info=m()({pageNo:1,pageSize:10},c,r,i),n({type:"apiGatewayModel/callList",payload:d})}})},a.handleDebug=function(e,t){var a=t.apiId;R.a.push({pathname:"/apiGateway/apiDebug",state:{apiId:a,record:t}})},a.handleLog=function(e,t){var a=t.apiId;R.a.push({pathname:"/apiGateway/apiLog",state:{apiId:a,record:t}})},a.handleUpdate=function(e,t){var a=t.apiId;R.a.push({pathname:"/apiGateway/apiUpdate",state:{apiId:a,record:t}})},a.handleUpdateDoc=function(e,t){var a=t.apiId;R.a.push({pathname:"/apiGateway/apiDocUpdate",state:{apiId:a,record:t}})},a.handleDetail=function(e,t){var a=t.apiId;R.a.push({pathname:"/apiGateway/callApiDetail",state:{apiId:a,record:t}})},a.getOrgInfo=function(e){e&&e.preventDefault&&e.preventDefault(),a.getOrgDetail(e)},a.getOrgDetail=function(e){var t=a.props.form,n=null;t.setFieldsValue({appkey:n});var r=a.props.dispatch;r({type:"uniComp/detail",payload:{tableName:"org",id:e},callback:function(e){var t=e.appkeyOutbounds;a.setState({appkeyOutbounds:t})}})},a}return F()(t,e),S()(t,[{key:"componentWillMount",value:function(){console.log("-----will mount");var e=this.props.dispatch,t=Object(Z["g"])(),a={userId:t};e({type:"groupModel/allGroupList",payload:a})}},{key:"componentDidMount",value:function(){var e=Object(Z["g"])();this.setState({userId:e});var t=this.props,a=t.dispatch,n=t.apiGatewayModel,r=n.data.callList;if(!r||0===r.length){var l={userId:e,data:{}};l.data.info={pageNo:1,pageSize:10},a({type:"apiGatewayModel/callList",payload:l})}}},{key:"getGroupOption",value:function(){var e=this.props.groupList;return this.getOption(e,"groupId","groupName")}},{key:"getAppkeyOption",value:function(){var e=this.state.appkeyOutbounds;return this.getOption(e,"appkey","targetSystemName")}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.selectedRows;return N.a.createElement(M["a"],{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(c["a"],{gutter:{md:8,lg:24,xl:48}},N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"API Name"},e("name")(N.a.createElement(p["a"],{placeholder:"please enter"})))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"Group"},e("groupIds")(N.a.createElement(Q["a"],{style:{width:"100%"},isDisabled:1}))))),N.a.createElement("div",{style:{overflow:"hidden"}},N.a.createElement("div",{style:{float:"right",marginBottom:8}},t.length>0&&N.a.createElement(s["a"],{htmlType:"button",style:{marginRight:8}},"Export script"),N.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"Query"),N.a.createElement(s["a"],{style:{marginLeft:8},onClick:this.handleFormReset,htmlType:"button"},"Reset"),N.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"UnFold ",N.a.createElement(f["a"],{type:"down"})))))}},{key:"renderAdvancedForm",value:function(){var e=this.props.form.getFieldDecorator,t=Object(Z["g"])();return N.a.createElement(M["a"],{onSubmit:this.handleSearch,layout:"inline"},N.a.createElement(c["a"],{gutter:{md:8,lg:24,xl:48}},N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"API Name"},e("name")(N.a.createElement(p["a"],{placeholder:"please enter"})))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"Group"},e("groupId")(N.a.createElement(D["a"],{placeholder:"please choose",style:{width:"100%"}},this.getGroupOption())))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"Org"},e("orgId")(N.a.createElement(_["a"],{style:{width:"100%"},userId:t,onChange:this.getOrgInfo}))))),N.a.createElement(c["a"],{gutter:{md:8,lg:24,xl:48}},N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"TargetSystemName"},e("appkey")(N.a.createElement(D["a"],{placeholder:"please choose",style:{width:"100%"}},this.getAppkeyOption())))),N.a.createElement(d["a"],{md:8,sm:24},N.a.createElement($,{label:"Status"},e("status")(N.a.createElement(W["a"],{javaCode:"apiService",javaKey:"status"}))))),N.a.createElement("div",{style:{overflow:"hidden"}},N.a.createElement("div",{style:{float:"right",marginBottom:24}},N.a.createElement(s["a"],{type:"primary",htmlType:"submit"},"Query"),N.a.createElement(s["a"],{style:{marginLeft:8},onClick:this.handleFormReset,htmlType:"button"},"Reset"),N.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"Fold ",N.a.createElement(f["a"],{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this.props,t=e.apiGatewayModel.callList,a=e.loading,n=e.groupList,r=this.state.selectedRows,l="apiId",o=n&&n.length>0?this.getColumns(n):[];return N.a.createElement(i["a"],{bordered:!1},N.a.createElement("div",{className:H.a.tableList},N.a.createElement("div",{className:H.a.tableListForm},this.renderForm()),N.a.createElement(P["a"],{rowKey:l,selectedRows:r,loading:a,data:t,columns:o,size:"small",onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})))}}]),t}(A["PureComponent"]),l=o))||l)||l);t["default"]=le},"/sse":function(e,t,a){e.exports={main:"antd-pro-pages-api-gateway-info-main",leftmenu:"antd-pro-pages-api-gateway-info-leftmenu",right:"antd-pro-pages-api-gateway-info-right",title:"antd-pro-pages-api-gateway-info-title"}},"01nU":function(e,t,a){"use strict";a.r(t);a("ssvk");var n,r,l,o,i,s,c,d=a("Qo4C"),p=(a("B3Wq"),a("CImR")),u=(a("wl+T"),a("zCXI")),m=(a("KbV2"),a("I+kI")),g=(a("cZcT"),a("T+5x")),h=(a("PCp+"),a("HnZV")),f=(a("4WAF"),a("Qfhr")),y=a("mK77"),v=a.n(y),E=(a("Z3A/"),a("pB2J")),I=(a("YVuj"),a("KfNe")),b=(a("85xf"),a("IYgN")),S=(a("kQuL"),a("Ig54")),w=(a("rTtu"),a("jksg")),k=(a("xkj2"),a("8LEP")),O=a("43Yg"),C=a.n(O),L=a("/tCh"),F=a.n(L),D=a("scpF"),M=a.n(D),A=a("O/V9"),N=a.n(A),T=a("8aBX"),R=a.n(T),j=(a("RmDK"),a("/6XP")),K=(a("YyIT"),a("2pDd")),x=a("uqIC"),G=a.n(x),V=a("7xWr"),U=a.n(V),P=a("LneV"),z=a("a/LZ"),B=a.n(z),H=a("+wSg"),Y=a("yKc7"),q=a.n(Y),W=a("CkN6"),Z=a("xNuS"),Q=a("nNTM"),_=a.n(Q),X=a("DnsZ"),J=a("MMK4"),$=a("WCBp"),ee=a("nPZ7"),te=a("HZnN"),ae=a("34ay"),ne=a("Ijbp"),re=a("eUr/"),le=(a("sjGl"),a("DAkq")),oe=a("rXjv"),ie=a.n(oe),se=(n=Object(P["connect"])(function(e){var t=e.appkeyModel,a=e.loading;return{inAppkeyList:t.inAppkeyList,loading:a.models.inAppkeyList}}),n((l=function(e){function t(){var e,a;C()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=M()(this,(e=N()(t)).call.apply(e,[this].concat(r))),a.state={targetKeys:[],selectedKeys:[],oriTargetKeysToOrg:[],apiId:0},a.componentDidMount=function(){var e=a.props.targetData,t=e&&e.apiServiceOrgs?e.apiServiceOrgs:[];a.setState({targetKeys:t})},a.handleChange=function(e,t,n){a.setState({targetKeys:e});var r=a.state,l=r.oriTargetKeysToOrg,o=r.apiId;console.log("---oriTargetKeysToOrg:",o,l);var i=[];l.forEach(function(t){var a=e.find(function(e){return e===t.appkey});console.log("targetKey1:",a),a?i.push(t):(console.log("targetKey2:",a),i.push(v()({},t,{act:"D"})))}),console.log("---updateApiServiceOrg1:",o,l),e.forEach(function(e){var t=l.find(function(t){return t.appkey===e});console.log("org1:",t),t||(console.log("org2:",t),i.push({apiId:o,appkey:e,act:"A"}))}),console.log("---updateApiServiceOrg2:",i);var s=a.props.onOrgTransfer;s(i),console.log("targetKeys: ",e),console.log("direction: ",t),console.log("moveKeys: ",n)},a.handleSelectChange=function(e,t){a.setState({selectedKeys:[].concat(ie()(e),ie()(t))}),console.log("sourceSelectedKeys: ",e),console.log("targetSelectedKeys: ",t)},a.handleScroll=function(e,t){console.log("direction:",e),console.log("target:",t.target)},a.setKey=function(e){return e.appkey},a}return R()(t,e),F()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,a=t.targetData,n=t.dispatch,r=this.state.apiId,l=e.targetData;if(l&&a!==l){var o=l&&l.apiServiceOrgs?l.apiServiceOrgs:[],i=o.map(function(e){return e.appkey});if(console.log("---oriTargetKeysToOrg:",o,"=======apiid======",l.apiId),this.setState({targetKeys:i,oriTargetKeysToOrg:o,apiId:l.apiId}),r!==l.apiId){var s=l.apiId;n({type:"appkeyModel/listAllIn",payload:{apiId:s}})}}}},{key:"render",value:function(){var e=this.props.inAppkeyList,t=this.state,a=t.targetKeys,n=t.selectedKeys;return console.log("=====1",a,e),G.a.createElement("div",null,G.a.createElement(le["a"],{showSearch:!0,rowKey:this.setKey,dataSource:e,titles:["Unauthorized Appkey","Authorized Appkey"],targetKeys:a,selectedKeys:n,onChange:this.handleChange,onSelectChange:this.handleSelectChange,onScroll:this.handleScroll,render:function(e){return"".concat(e.callerName,"-").concat(e.appkey)},listStyle:{width:280,height:300}}))}}]),t}(x["PureComponent"]),r=l))||r),ce=se,de=a("YmGy"),pe=te["a"].check,ue=X["a"].ACT,me=X["a"].API_STATUS,ge=K["a"].Item,he=j["a"].Option,fe=function(e){return Object.keys(e).map(function(t){return e[t]}).join(",")},ye=["default","processing","success","default","error"],ve=Object(J["d"])("apiService","status"),Ee=ve.map(function(e){return{value:e.itemCode,text:e.itemValue}}),Ie=(o=Object(P["connect"])(function(e){var t=e.apiGatewayModel,a=e.apiCreateModel,n=e.groupModel,r=e.loading;return{apiGatewayModel:t,apiCreateModel:a,groupList:n.groupList,loading:r.models.apiGatewayModel}}),i=K["a"].create(),o(s=i((c=function(e){function t(){var e,a;C()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=M()(this,(e=N()(t)).call.apply(e,[this].concat(r))),a.state={expandForm:!1,selectedRows:[],selectedRow:{},updateApiServiceOrg:[],formValues:{},pagination:{pageNo:1,pageSize:10},filtersArg:{},sorter:{},modalVisible:!1,drawerVisible:!1,userId:null},a.getColumns=Object(H["a"])(function(e){console.log("---render^^^^^^^^^^^^^^^^");var t=Object(ae["a"])("api_save"),n=pe(t,"commandAct");console.log("---",e);var r=[{title:"Id",dataIndex:"apiId"},{title:"API Name",dataIndex:"name",render:function(e,t){return G.a.createElement("a",{onClick:function(){return a.handleDetail(!0,t)}},G.a.createElement(Z["a"],{length:15,tooltip:!0},e))}},{title:"Group",dataIndex:"groupId",render:function(t){return G.a.createElement(x["Fragment"],null,Object(J["a"])(e,t)," ")}},{title:"URL Path",dataIndex:"requestUrl",render:function(e){return G.a.createElement(Z["a"],{length:20,tooltip:!0},e)}},{title:"Status",dataIndex:"status",filters:Ee,render:function(e){return G.a.createElement(k["a"],{status:ye[e],text:Object(J["c"])(ve,e)})}},{title:"Update time",dataIndex:"updateTime",sorter:!0,render:function(e){return G.a.createElement("span",null,B()(e).format("YYYY-MM-DD HH:mm:ss"))}}];if(n){var l={title:"Action",render:function(e,t){return G.a.createElement(x["Fragment"],null,G.a.createElement("span",{id:"toOnline",style:{display:t.status===me.OFFLINE||t.status===me.CLOSE?"inline":"none"}},G.a.createElement("a",{onClick:function(){return a.handleStatusClick(ue.ONLINE,t)}},"Online"),G.a.createElement(w["a"],{type:"vertical"})),G.a.createElement("a",{onClick:function(){return a.handleAccess(!0,t)}},"Authorization"),G.a.createElement(w["a"],{type:"vertical"}),a.renderMoreBtn({current:t}))}};r.push(l)}return r},q.a),a.moreHandle=function(e,t){"handleUpdate"===e?a.handleUpdate(!0,t):"handleUpdateDoc"===e?a.handleUpdateDoc(!0,t):"handleDebug"===e?a.handleDebug(!0,t):"handleLog"===e?a.handleLog(!0,t):"handleOffline"===e?a.handleStatusClick(ue.OFFLINE,t):"handleDelete"===e?a.handleStatusClick(ue.DEL,t):"handleDown"===e&&a.handleDown(t)},a.renderMoreBtn=function(e){var t=e.current,n=t.status;return G.a.createElement(I["a"],{overlay:G.a.createElement(S["b"],{onClick:function(e){var n=e.key;return a.moreHandle(n,t)}},G.a.createElement(S["b"].Item,{key:"handleUpdate"},"Modify"),G.a.createElement(S["b"].Item,{key:"handleUpdateDoc"},"API doc"),G.a.createElement(S["b"].Item,{key:"handleDebug"},"Debug"),G.a.createElement(S["b"].Item,{key:"handleLog"},"Set Log"),G.a.createElement(S["b"].Item,{key:"handleDown"},"Download"),n===me.ONLINE?G.a.createElement(S["b"].Item,{key:"handleOffline"},"Offline"):null,n===me.OFFLINE?G.a.createElement(S["b"].Item,{key:"handleDelete"},"Remove"):null)},G.a.createElement("a",null,"More ",G.a.createElement(b["a"],{type:"down"})))},a.getOption=function(e,t,a){return!e||e.length<1?G.a.createElement(he,{key:0,value:0},"\u6ca1\u6709\u627e\u5230\u9009\u9879"):e.map(function(e){return G.a.createElement(he,{key:e[t],value:e[t]},e[a])})},a.respDeal=function(e){var t=e.code,n=e.msg;if("200"===t){n&&""!==n||(n="Success."),E["a"].success(n),a.setState({selectedRows:[]});var r=a.state,l=r.pagination,o=r.filtersArg,i=r.sorter;a.handleStandardTableChange(l,o,i)}else E["a"].error("error:".concat(n))},a.conversionFilter=function(e){return Object.keys(e).reduce(function(t,a){var n=v()({},t);return n[a]=fe(e[a]),n},{})},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,l=a.state,o=l.formValues,i=l.userId;a.setState({pagination:e,filtersArg:t,sorter:n});var s=a.conversionFilter(t),c=v()({pageNo:e.current,pageSize:e.pageSize},o,s);n.field&&(c.sorter="".concat(n.field,"_").concat(n.order));var d={userId:i,data:{}};d.data.info=v()({pageNo:1,pageSize:10},c),d.data.info.pageNo=d.data.info.pageNo?d.data.info.pageNo:1,r({type:"apiGatewayModel/apiList",payload:d})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),t.setFieldsValue({wsdlId:null});var r=a.state.userId,l={userId:r,data:{}};l.data.info={pageNo:1,pageSize:10},n({type:"apiGatewayModel/apiList",payload:l})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleStatusClick=function(e,t){var n=a.props.dispatch,r={data:{}};r.data.info={},r.option=parseInt(e,10),r.data.info.apiIds=[t.apiId],console.log("-----:",r,e),n({type:"apiGatewayModel/apiStatusBatch",payload:r,callback:function(e){a.respDeal(e,n)}})},a.handleDown=function(e){var t=e.apiId,a=e.name,n=Object(ae["f"])(),r="/server/baseInfo/statement/api?apiId=".concat(t),l=new XMLHttpRequest;l.open("GET",r,!0),l.setRequestHeader("Content-type","application/json"),l.setRequestHeader("Authorization","Bearer ".concat(n)),l.send(),l.responseType="blob",l.onload=function(){var e=this.response,t=new FileReader;t.readAsDataURL(e),t.onload=function(e){var t=document.createElement("a");t.download="".concat(a,"_api_config.sql"),t.href=e.target.result,document.body.appendChild(t),t.click()}}},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=v()({},t);console.log(t,r),a.setState({formValues:r});var l=a.state,o=l.filtersArg,i=l.sorter,s=l.userId,c=a.conversionFilter(o),d={userId:s,data:{}};d.data.info=v()({pageNo:1,pageSize:10},c,r,i),n({type:"apiGatewayModel/apiList",payload:d})}})},a.handleAccess=function(e,t){if(console.log("handleTest",e,t),t.status!==me.OFFLINE&&t.status!==me.CLOSE){a.setState({selectedRow:t});var n=a.props.dispatch,r={data:{}};r.data.info={},r.option=4,r.data.info.apiId=t.apiId,n({type:"apiCreateModel/apiInfo",payload:r,callback:function(e){a.setState({selectedRow:e.data})}}),a.handleModalVisible(t,e)}else E["a"].error("Api\u8fd8\u672a\u53d1\u5e03\u65e0\u6cd5\u6388\u6743\uff01")},a.handleDebug=function(e,t){var a=t.apiId;U.a.push({pathname:"/apiGateway/apiDebug",state:{apiId:a,record:t}})},a.handleLog=function(e,t){var a=t.apiId;U.a.push({pathname:"/apiGateway/apiLog",state:{apiId:a,record:t}})},a.onClose=function(){a.setState({drawerVisible:!1})},a.handleUpdate=function(e,t){var a=t.apiId;U.a.push({pathname:"/apiGateway/apiUpdate",state:{apiId:a,record:t}})},a.handleUpdateDoc=function(e,t){var a=t.apiId;U.a.push({pathname:"/apiGateway/apiDocUpdate",state:{apiId:a,record:t}})},a.handleDetail=function(e,t){var a=t.apiId;U.a.push({pathname:"/apiGateway/apiDetail",state:{apiId:a,record:t}})},a.handleOrgTransfer=function(e){console.log("---updateApiServiceOrg\uff1d\uff1d\uff1d\uff1d3:",e),a.setState({updateApiServiceOrg:e})},a.okHandle=function(){var e=a.state,t=e.updateApiServiceOrg,n=e.selectedRow,r=a.props.dispatch;console.log("---updateApiServiceOrg\uff1d\uff1d\uff1d\uff1d4:",t),n.apiServiceOrgs=t||[];var l=Object(ee["d"])(n);console.log("api access submit apiInfo:",l),r({type:"apiCreateModel/submitAccess",payload:l,callback:function(e){if("200"===e.code){var t=e.msg||"success.";a.setState({modalVisible:!1,selectedRow:null}),E["a"].success(t)}else{var n=e.msg||"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef\u3002";E["a"].error(n)}}})},a.cancelHandle=function(){a.setState({modalVisible:!1,selectedRow:null})},a.handleModalVisible=function(e,t){a.setState({modalVisible:t,selectedRow:e})},a}return R()(t,e),F()(t,[{key:"componentWillMount",value:function(){console.log("-----will mount");var e=this.props.dispatch,t=Object(ae["g"])(),a={userId:t};e({type:"groupModel/allGroupList",payload:a})}},{key:"componentDidMount",value:function(){var e=Object(ae["g"])();this.setState({userId:e});var t=this.props,a=t.dispatch,n=t.apiGatewayModel,r=t.location,l=r.state,o=l||{wsdlId:"",refresh:!1},i=o.wsdlId,s=o.refresh,c=n.data.list,d={wsdlId:i};if(this.setState({formValues:d}),!c||0===c.length||i||s){var p={userId:e,data:{}};p.data.info={pageNo:1,pageSize:10,wsdlId:i},a({type:"apiGatewayModel/apiList",payload:p})}}},{key:"getGroupOption",value:function(){var e=this.props.groupList;return this.getOption(e,"groupId","groupName")}},{key:"renderSimpleForm",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.getFieldValue,r=e.location,l=Object(ae["g"])(),o=Object(ae["h"])(),i=r.state,s=i||{wsdlId:""},c=s.wsdlId,d=this.state.selectedRows,p="";return"super_admin"!==o&&"super_manager"!==o||(p=G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Tenant"},a("tenantId",{})(G.a.createElement(de["a"],{userId:l}))))),G.a.createElement(K["a"],{onSubmit:this.handleSearch,layout:"inline"},G.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"API Name"},a("name")(G.a.createElement(h["a"],{placeholder:"please enter"})))),G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Group"},a("groupIds")(G.a.createElement(ne["a"],{style:{width:"100%"},isDisabled:1})))),G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Wsdl"},a("wsdlId",{initialValue:c,rules:[{required:"2"===n("serviceType"),message:"please choose"}]})(G.a.createElement(re["a"],{userId:l}))))),G.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},p),G.a.createElement("div",{style:{overflow:"hidden"}},G.a.createElement("div",{style:{float:"right",marginBottom:8}},d.length>0&&G.a.createElement(m["a"],{htmlType:"button",style:{marginRight:8}},"Export script"),G.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"Query"),G.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleFormReset,htmlType:"button"},"Reset"),G.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"UnFold ",G.a.createElement(b["a"],{type:"down"})))))}},{key:"renderAdvancedForm",value:function(){var e=this.props,t=e.form,a=t.getFieldDecorator,n=t.getFieldValue,r=e.location,l=Object(ae["g"])(),o=Object(ae["h"])(),i=r.state,s=i||{wsdlId:""},c=s.wsdlId,d="";return"super_admin"!==o&&"super_manager"!==o||(d=G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Tenant"},a("tenantId",{})(G.a.createElement(de["a"],{userId:l}))))),G.a.createElement(K["a"],{onSubmit:this.handleSearch,layout:"inline"},G.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"API Name"},a("name")(G.a.createElement(h["a"],{placeholder:"please enter"})))),G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Group"},a("groupId")(G.a.createElement(j["a"],{placeholder:"please choose",style:{width:"100%"}},this.getGroupOption())))),G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Wsdl"},a("wsdlId",{initialValue:c,rules:[{required:"2"===n("serviceType"),message:"please choose"}]})(G.a.createElement(re["a"],{userId:l}))))),G.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},d,G.a.createElement(f["a"],{md:8,sm:24},G.a.createElement(ge,{label:"Status"},a("status")(G.a.createElement($["a"],{javaCode:"apiService",javaKey:"status"}))))),G.a.createElement("div",{style:{overflow:"hidden"}},G.a.createElement("div",{style:{float:"right",marginBottom:24}},G.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"Query"),G.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleFormReset,htmlType:"button"},"Reset"),G.a.createElement("a",{style:{marginLeft:8},onClick:this.toggleForm},"Fold ",G.a.createElement(b["a"],{type:"up"})))))}},{key:"renderForm",value:function(){var e=this.state.expandForm;return e?this.renderAdvancedForm():this.renderSimpleForm()}},{key:"render",value:function(){var e=this,t=this.props,a=t.apiGatewayModel.data,n=t.loading,r=t.groupList,l=this.state,o=l.selectedRows,i=l.modalVisible,s=l.selectedRow,c=l.drawerVisible,m="apiId",g=r&&r.length>0?this.getColumns(r):[];return G.a.createElement(d["a"],{bordered:!1},G.a.createElement("div",{className:_.a.tableList},G.a.createElement("div",{className:_.a.tableListForm},this.renderForm()),G.a.createElement(W["a"],{rowKey:m,selectedRows:o,loading:n,data:a,columns:g,size:"small",onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange})),G.a.createElement(u["a"],{title:"Authorization to call this API",visible:i,width:680,onOk:function(){return e.okHandle()},onCancel:function(){return e.cancelHandle()}},G.a.createElement(ce,{targetData:s,onOrgTransfer:this.handleOrgTransfer})),G.a.createElement(p["a"],{width:640,placement:"right",closable:!1,onClose:this.onClose,visible:c}))}}]),t}(x["PureComponent"]),s=c))||s)||s);t["default"]=Ie},Ijbp:function(e,t,a){"use strict";a("iFBc");var n,r,l,o=a("jCcf"),i=a("43Yg"),s=a.n(i),c=a("/tCh"),d=a.n(c),p=a("scpF"),u=a.n(p),m=a("O/V9"),g=a.n(m),h=a("8aBX"),f=a.n(h),y=a("uqIC"),v=a.n(y),E=a("LneV"),I=a("SfOC"),b=a("34ay"),S=(n=Object(E["connect"])(function(e){var t=e.groupModel,a=e.loading;return{groupModel:t,groupList:t.groupList,loading:a.models.groupModel}}),n((l=function(e){function t(){var e,a;s()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=u()(this,(e=g()(t)).call.apply(e,[this].concat(r))),a.state={value:void 0},a.onChange=function(e){console.log(e),a.setState({value:e});var t=a.props.onChange;t(e)},a}return f()(t,e),d()(t,[{key:"componentWillMount",value:function(){console.log("-----will mount");var e=this.props.dispatch,t=Object(b["g"])(),a={userId:t};e({type:"groupModel/allGroupList",payload:a})}},{key:"render",value:function(){var e=this.state.value,t=this.props,a=t.style,n=t.groupList,r=t.isDisabled,l=[];return n&&Object(I["b"])(n,l,0,r),v.a.createElement(o["a"],{style:a,value:e||null,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:l,placeholder:"please choose",showSearch:!0,treeNodeFilterProp:"title",onChange:this.onChange,multiple:!0,allowClear:!0,treeDefaultExpandAll:!0})}}]),t}(y["PureComponent"]),r=l))||r);t["a"]=S},"md+l":function(e,t,a){"use strict";a.r(t);var n,r,l,o=a("43Yg"),i=a.n(o),s=a("/tCh"),c=a.n(s),d=a("scpF"),p=a.n(d),u=a("O/V9"),m=a.n(u),g=a("8aBX"),h=a.n(g),f=(a("kQuL"),a("Ig54")),y=a("uqIC"),v=a.n(y),E=a("LneV"),I=a("7xWr"),b=a.n(I),S=a("QHZv"),w=a("v99g"),k=a("/sse"),O=a.n(k),C=f["b"].Item,L=(n=Object(E["connect"])(function(e){var t=e.user;return{currentUser:t.currentUser}}),n((l=function(e){function t(e){var a;i()(this,t),a=p()(this,m()(t).call(this,e)),a.getmenu=function(){var e=a.state.menuMap;return Object.keys(e).map(function(t){return v.a.createElement(C,{key:t},e[t])})},a.getRightTitle=function(){var e=a.state,t=e.selectKey,n=e.menuMap;return n[t]},a.selectKey=function(e){var t=e.key;b.a.push("/apiGateway/apiList/".concat(t)),a.setState({selectKey:t})};var n=e.match,r=e.location,l={list:v.a.createElement(S["FormattedMessage"],{id:"app.settings.menuMap.apiList",defaultMessage:"Own API List"}),callList:v.a.createElement(S["FormattedMessage"],{id:"app.settings.menuMap.callList",defaultMessage:"Call API List"})},o=r.pathname.replace("".concat(n.path,"/"),"");return a.state={menuMap:l,selectKey:l[o]?o:"list"},a}return h()(t,e),c()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.children,n=t.currentUser;if(!n.userid)return"";var r=this.state.selectKey;return v.a.createElement(w["a"],null,v.a.createElement("div",{className:O.a.main,ref:function(t){e.main=t}},v.a.createElement("div",{className:O.a.right},v.a.createElement(f["b"],{mode:"horizontal",selectedKeys:[r],onClick:this.selectKey,style:{width:"100%"}},this.getmenu()),a)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.match,n=e.location,r=n.pathname.replace("".concat(a.path,"/"),"");return r=t.menuMap[r]?r:"base",r!==t.selectKey?{selectKey:r}:null}}]),t}(y["Component"]),r=l))||r);t["default"]=L}}]);