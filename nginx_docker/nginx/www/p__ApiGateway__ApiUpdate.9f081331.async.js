(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{pDxA:function(e,t,a){"use strict";a.r(t);a("KbV2");var r,n,l,o,c,s,i,u=a("I+kI"),d=(a("j+Ep"),a("/Dxd")),m=(a("SCjY"),a("Kw9K")),p=(a("ssvk"),a("Qo4C")),h=(a("cZcT"),a("T+5x")),g=(a("PCp+"),a("HnZV")),y=(a("4WAF"),a("Qfhr")),f=a("mK77"),k=a.n(f),v=(a("Z3A/"),a("pB2J")),b=(a("mofY"),a("HZOl")),E=(a("85xf"),a("IYgN")),S=a("rXjv"),A=a.n(S),w=a("43Yg"),C=a.n(w),T=a("/tCh"),I=a.n(T),q=a("scpF"),x=a.n(q),P=a("O/V9"),N=a.n(P),F=a("8aBX"),K=a.n(F),D=(a("YyIT"),a("2pDd")),R=(a("GCRk"),a("fmtF")),B=a("uqIC"),V=a.n(B),M=a("7xWr"),O=a.n(M),j=a("JORn"),L=a.n(j),Y=a("LneV"),U=a("WnAZ"),_=a("zHco"),W=(a("GWAV"),a("7YyU")),z=(a("nYhX"),a("Yhl2")),G=(a("rTtu"),a("jksg")),H=(a("/AXM"),a("MaTn")),Z=(a("RmDK"),a("/6XP")),J=a("yKc7"),X=a.n(J),Q=a("gcl2"),$=a.n(Q),ee=a("JFJ/"),te=function(e){function t(e){var a;return C()(this,t),a=x()(this,N()(t).call(this,e)),a.index=0,a.cacheOriginData={},a.toggleEditable=function(e,t){e.preventDefault();var r=a.state.data;console.log("------toggleEditable-1:",r);var n=r.map(function(e){return k()({},e)});console.log("------toggleEditable-0:",n);var l=n.find(function(e){return e.key===t}),o=k()({},l);console.log("------toggleEditable1:",l,o),o&&(o.editable||(a.cacheOriginData[t]=k()({},o)),o.editable=!o.editable,o.act="A",n[t]=o,console.log("------toggleEditable2:",o),a.setState({data:n}))},console.log("AdapterAttrTableForm props:",e.dataSource),a.state={data:e.dataSource,loading:!1},a}return K()(t,e),I()(t,[{key:"getRowByKey",value:function(e,t){var a=this.state.data,r=(t||a).find(function(t){return t.key===e});return r}},{key:"handleKeyPress",value:function(e,t){"Enter"===e.key&&this.saveRow(e,t)}},{key:"handleFieldChange",value:function(e,t,a){var r=a.key,n=this.state.data,l=n.map(function(e){return k()({},e)}),o=this.getRowByKey(r,l);o&&(o[t]=e.target.value,this.setState({data:l}))}},{key:"saveRow",value:function(e,t){var a=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){if(a.clickedCancel)a.clickedCancel=!1;else{var r=a.getRowByKey(t)||{};if(!r.attrValue)return v["a"].error("Please fill in the complete information."),e.target.focus(),void a.setState({loading:!1});delete r.isNew,a.toggleEditable(e,t);var n=a.state.data,l=a.props.onMyChange;console.log("-------onMyChange in AdatperAtttrTableForm1",a.props),l&&(console.log("-------onMyChange in AdatperAtttrTableForm"),l(n)),a.setState({loading:!1})}},500)}},{key:"cancel",value:function(e,t){this.clickedCancel=!0,e.preventDefault();var a=this.state.data,r=a.map(function(e){return k()({},e)}),n=this.getRowByKey(t,r);this.cacheOriginData[t]&&(Object.assign(n,this.cacheOriginData[t]),delete this.cacheOriginData[t]),n.editable=!1,this.setState({data:r}),this.clickedCancel=!1}},{key:"remove",value:function(e,t){var a=this.state.data,r=a.filter(function(e){return e.key!==t}),n=this.props.onMyChange;this.setState({data:r}),n(r)}},{key:"render",value:function(){var e=this,t=[{title:"Attr Spec Name",dataIndex:"attrSpecName",key:"attrSpecName",width:"20%",render:function(e){return V.a.createElement("div",{style:{textAlign:"left",fontWeight:"bold"}},e,":")}},{title:"Default Attr Value",dataIndex:"defaultValue",key:"defaultValue",width:"20%"},{title:"Attr Value",dataIndex:"attrValue",key:"attrValue",render:function(t,a){var r=t||"";return a.editable?V.a.createElement(g["a"],{value:r,onChange:function(t){return e.handleFieldChange(t,"attrValue",a)},onKeyPress:function(t){return e.handleKeyPress(t,a.key)},placeholder:"Attribute Value of Adapter"}):"".concat(r)}},{title:"action",key:"action",width:"15%",render:function(t,a){var r=e.state.loading;return a.editable&&r?null:a.editable?V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.saveRow(t,a.key)}},"Hold"),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement("a",{onClick:function(t){return e.cancel(t,a.key)}},"Cancel")):V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.toggleEditable(t,a.key)}},"Edit"),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement(z["a"],{title:"Do you delete this row?\uff1f",onConfirm:function(t){return e.remove(t,a.key)}},V.a.createElement("a",null,"Del")))}}],a=this.state,r=a.loading,n=a.data,l=this.props.record,o=l.url,c=l.reqPath,s=c||"",i="".concat(o).concat(s),u=function(){return i};return V.a.createElement(B["Fragment"],null,V.a.createElement(W["a"],{title:u,loading:r,columns:t,dataSource:n,pagination:!1,size:"small",rowClassName:function(e){return e.editable?$.a.editable:""}}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){console.log("11111",e.dataSource,t.data);var a=t.data.map(function(e){var t=e.attrSpecId;return t}),r=e.dataSource.map(function(e){var t=e.attrSpecId;return t});return X()(r,a)?null:(console.log("22222"),{data:e.dataSource})}}]),t}(B["PureComponent"]),ae=te,re=a("DnsZ"),ne=re["a"].CALL_POINT,le=Z["a"].Option,oe=(r=Object(Y["connect"])(function(e){var t=e.adapterModel;return{adapterModel:t}}),r((l=function(e){function t(e){var a;return C()(this,t),a=x()(this,N()(t).call(this,e)),a.index=0,a.cacheOriginData={},a.originData={},a.toggleEditable=function(e,t){e.preventDefault();var r=a.state.data,n=r.map(function(e){return k()({},e)}),l=a.getRowByKey(t,n);if(l&&(l.editable||(a.cacheOriginData[t]=k()({},l)),l.editable=!l.editable,a.setState({data:n}),l.editable)){var o=a.props.onChange;o&&o(n)}},a.newMember=function(e){var t=a.state.data,r=0,n=0,l=1;t.forEach(function(e){"in"===e.backendType?parseInt(e.serviceSeq,10)>r&&(r=parseInt(e.serviceSeq,10)):"out"===e.backendType?parseInt(e.serviceSeq,10)>n&&(n=parseInt(e.serviceSeq,10)):l=parseInt(e.serviceSeq,10)});var o=t.map(function(t){var a=k()({},t);return"in"===e&&("out"===t.backendType?a.serviceSeq+=1:t.backendType===ne&&(a.serviceSeq+=1)),a}),c=1;"in"===e?c=r+1:"out"===e&&(c=n>0?n+1:l+1),o.push({key:"NEW_TEMP_ID_".concat(a.index),serviceSeq:c,backendType:e,url:"",reqPath:"",editable:!0,isNew:!0}),a.index+=1,a.setState({data:o})},a.expandedRowRender=function(e){var t=e.adapterAttrs,r=t?t.map(function(e,t){return k()({},e,{key:t})}):[],n=k()({},e,{adapterAttrs:r});return console.log("--expandedRowRender-",e,n),e.backendType&&e.backendType.toLowerCase()!==ne?V.a.createElement(ae,{record:n,onMyChange:function(t){return a.adapterAttrChange(e,t)},dataSource:r}):V.a.createElement("span",null,"Call endpoint do not need to configure properties")},a.adapterAttrChange=function(e,t){console.log("-------adapterAttrChange");var r=e.key,n=a.state.data,l=n.map(function(e){return k()({},e)}),o=a.getRowByKey(r,l);o.adapterAttrs=t,a.setState({data:l}),console.log("-------adapterAttrChange1",l);var c=a.props.onChange;c&&c(l)},a.originData=e.value,a.state={data:e.value,loading:!1,value:e.value},a}return K()(t,e),I()(t,[{key:"getRowByKey",value:function(e,t){var a=this.state.data;return(t||a).filter(function(t){return t.key===e})[0]}},{key:"handleFieldChange",value:function(e,t,a){var r=a.key,n=this.state.data,l=n.map(function(e){return k()({},e)}),o=this.getRowByKey(r,l);o&&(o[t]=e.target.value,this.setState({data:l}))}},{key:"handleSelectFieldChange",value:function(e,t,a){var r=a.key,n=this.state.data,l=n.map(function(e){return k()({},e)}),o=this.getRowByKey(r,l);o&&(o[t]=e,this.setState({data:l}))}},{key:"handleAdapterFieldChange",value:function(e,t,a,r){var n=this,l=a.key,o=this.state.data,c=this.props.tableChange,s=o.map(function(e){return k()({},e)}),i=this.getRowByKey(l,s);if(i){c(r,a.backendType);var u=this.originData.find(function(t){return t.key===a.key&&e===t.adapterSpecId}),d=u?u.adapterAttrs:[];if(console.log(e,t,a,"===== origin in handleAdapterFieldChange:",a.key,u,d),i.adapterSpecId=e,i.adapterSpecName=t,d&&d.length>0)i.adapterAttrs=d,this.setState({data:s}),console.log("=====in changeAdapter:",a.key,u,d);else{var m={tableName:"adapter_spec",id:i.adapterSpecId},p=this.props.dispatch;console.log("----newData in callback in changeAdapter."),p({type:"adapterModel/detail",payload:m,callback:function(e){if(e){var t=e.adapterAttrSpecs,a=t?t.map(function(e){return{backendId:i.backendId,attrSpecId:e.attrSpecId,defaultValue:e.defaultValue||"",attrValue:"",attrSpecCode:e.attrSpecCode,attrSpecName:e.attrSpecName,act:"N"}}):[];i.adapterAttrs=a,i.url=e.url,i.reqPath=e.reqPath,n.setState({data:s}),console.log("----newData in callback in changeAdapter:",s)}}})}}}},{key:"handleKeyPress",value:function(e,t){"Enter"===e.key&&this.saveRow(e,t)}},{key:"remove",value:function(e){var t=this.state.data,a=this.props.onChange,r=t.filter(function(t){return t.key!==e});this.setState({data:r}),a(r)}},{key:"validateSeq",value:function(e){var t=this.state.data,a=!1;if(e.serviceSeq<=0)return a=!0,v["a"].error("service seq\u5fc5\u987b\u5927\u4e8e0\uff0c\u8bf7\u91cd\u65b0\u66f4\u6539\u3002"),a;var r=t.find(function(t){return t.serviceSeq===e.serviceSeq&&t.key!==e.key});if(r)return a=!0,v["a"].error("service seq\u8ddf".concat(r.url,"\u7684service seq\u51b2\u7a81\uff0c\u8bf7\u91cd\u65b0\u66f4\u6539\u3002")),a;var n=t.find(function(t){return t.backendType.toLowerCase()===ne&&t.key!==e.key});if(!n)return a;var l=n.serviceSeq;return"out"===e.backendType.toLowerCase()&&e.serviceSeq<=l?(a=!0,v["a"].error("out\u7c7b\u578b\u7684service seq\u5fc5\u987b\u5927\u4e8e".concat(l,"\uff0c\u8bf7\u91cd\u65b0\u66f4\u6539\u3002")),a):"in"===e.backendType.toLowerCase()&&e.serviceSeq>=l?(a=!0,v["a"].error("in\u7c7b\u578b\u7684 seq\u5fc5\u987b\u5c0f\u4e8e".concat(l,"\uff0c\u8bf7\u91cd\u65b0\u66f4\u6539\u3002")),a):a}},{key:"saveRow",value:function(e,t){var a=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){if(a.clickedCancel)a.clickedCancel=!1;else{var r=a.getRowByKey(t)||{};if(!r.serviceSeq||r.backendType!==ne&&!r.adapterSpecId)return v["a"].error("\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f\u3002"),e.target.focus(),void a.setState({loading:!1});if("in"!==r.backendType&&"out"!==r.backendType&&r.backendType!==ne)return v["a"].error("\u4e0d\u80fd\u8f93\u5165".concat(r.backendType,"\u53ea\u80fd\u8f93\u5165in \u6216\u8005 out\u3002")),e.target.focus(),void a.setState({loading:!1});var n=a.validateSeq(r);if(n)return e.target.focus(),void a.setState({loading:!1});delete r.isNew,a.toggleEditable(e,t);var l=a.state.data,o=a.props.onChange;o(l),a.setState({loading:!1})}},500)}},{key:"saveAllRow",value:function(e,t){var a=this;e.persist(),this.setState({loading:!0}),setTimeout(function(){var e=a.props.onChange,r=a.state.data,n=r.map(function(e){return k()({},e)}),l=a.getRowByKey(t,n),o=l.adapterAttrs,c=o.map(function(e){var t=k()({},e,{act:"A"});return e.attrValue||(t=k()({},e,{attrValue:"",act:"A"})),t});l.adapterAttrs=c,console.log("saveall",o,c,n),a.setState({data:n}),e(n),a.setState({loading:!1})},500)}},{key:"cancel",value:function(e,t){this.clickedCancel=!0,e.preventDefault();var a=this.state.data,r=a.map(function(e){return k()({},e)}),n=this.getRowByKey(t,r);this.cacheOriginData[t]&&(Object.assign(n,this.cacheOriginData[t]),delete this.cacheOriginData[t]),n.editable=!1,this.setState({data:r}),this.clickedCancel=!1;var l=this.props.onChange;l&&l(r)}},{key:"render",value:function(){var e=this,t=[{title:"in\uff0fout",dataIndex:"backendType",key:"backendType",render:function(t,a){if(a.editable&&(null===t||t.toLowerCase()!==ne))return V.a.createElement(Z["a"],{value:t,style:{width:90},onChange:function(t){return e.handleSelectFieldChange(t,"backendType",a)}},V.a.createElement(le,{key:"in",value:"in"},"in"),V.a.createElement(le,{key:"out",value:"out"},"out"),V.a.createElement(le,{key:ne,value:ne,disabled:!0},ne));if(t){var r=t&&2!==t.length?t&&3===t.length?"green":"volcano":"geekblue";return V.a.createElement(H["a"],{color:r,key:t},"\xa0\xa0",t.toUpperCase(),"\xa0\xa0")}return V.a.createElement("span",null,"\xa0")}},{title:"Order Seq",dataIndex:"serviceSeq",key:"serviceSeq",defaultSortOrder:"ascend",sorter:function(e,t){return e.serviceSeq-t.serviceSeq},render:function(t,a){return a.editable?V.a.createElement(g["a"],{value:t,onChange:function(t){return e.handleFieldChange(t,"serviceSeq",a)},onKeyPress:function(t){return e.handleKeyPress(t,a.key)},placeholder:"service seq"}):t}},{title:"Adapter",dataIndex:"adapterSpecId",key:"adapterSpecId",render:function(t,a){if(a.editable&&(null===t||a.backendType.toLowerCase()!==ne))return V.a.createElement(ee["a"],{value:t,record:a,style:{width:300},onMyChange:function(t,r,n){return e.handleAdapterFieldChange(t,r,a,n)}});if(t){var r=a.adapterSpecName;return r}return V.a.createElement("span",null,"None")}},{title:"action",key:"action",render:function(t,a){var r=e.state.loading;if(a.editable&&r)return null;if(a.editable)return a.isNew?V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.saveRow(t,a.key)}},"Add"),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement(z["a"],{title:"Do you remove\uff1f",onConfirm:function(){return e.remove(a.key)}},V.a.createElement("a",null,"Remove"))):V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.saveRow(t,a.key)}},"Hold"),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement("a",{onClick:function(t){return e.cancel(t,a.key)}},"Cancel"));var n=a.backendType?a.backendType.toLowerCase():"";return n===ne?V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.toggleEditable(t,a.key)}},"Edit")):V.a.createElement("span",null,V.a.createElement("a",{onClick:function(t){return e.toggleEditable(t,a.key)}},"Edit"),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement(z["a"],{title:"Do you remove\uff1f",onConfirm:function(){return e.remove(a.key)}},V.a.createElement("a",null,"Remove")),V.a.createElement(G["a"],{type:"vertical"}),V.a.createElement("a",{onClick:function(t){return e.saveAllRow(t,a.key)}},"Save All Attr"))}}],a=this.state,r=a.loading,n=a.data;return V.a.createElement(B["Fragment"],null,V.a.createElement(W["a"],{loading:r,columns:t,dataSource:n,pagination:!1,defaultExpandAllRows:!0,expandedRowRender:function(t){return e.expandedRowRender(t)},rowClassName:function(e){return e.editable?$.a.editable:""}}),V.a.createElement(h["a"],{gutter:16},V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:12,style:{height:50}},V.a.createElement(u["a"],{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:function(){return e.newMember("in")},icon:"plus-circle",htmlType:"button"},"Add Adapter (in)")),V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:12,style:{height:50}},V.a.createElement(u["a"],{style:{width:"100%",marginTop:16,marginBottom:8},type:"dashed",onClick:function(){return e.newMember("out")},icon:"plus-square",htmlType:"button"},"Add Adapter (out)"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return X()(e.value,t.value)?null:{data:e.value,value:e.value}}}]),t}(B["PureComponent"]),n=l))||n),ce=oe,se=a("WCBp"),ie=a("mC/d"),ue=a("nPZ7"),de=a("iFb4"),me=a("kmo5"),pe=a("34ay"),he=re["a"].CALL_POINT,ge=R["a"].TabPane,ye=["front","back","backAttr"],fe={front:{groupId:"group",name:"name",serviceType:"service type",requestUrl:"request url",reqMethod:"request method",apiType:"api range",actionName:"action name"},back:{serviceType:"service type",url:"url",reqPath:"path",reqMethod:"request method",connectTimeout:"connect timeout\uff08ms\uff09",socketTimeout:"socket timeout\uff08ms\uff09",orgId:"provider",authType:"secret",callType:"call type"},backAttr:{userName:"user Name",userPassword:"user Password",tokenKey:"token Key",tokenStr:"token String",tokenUser:"token User",tokenPassword:"token Password",tokenUrl:"token Url",trustStore:"trustStore path",trustStorePassword:"trustStore Password",keyStore:"keyStore path",keyStorePassword:"keyStore Password",ssl:"SSL",isNotValidCert:"Ignore Cert\uff08TrustStore\uff09",privateKeyName:"Private Key Name\uff08KeyStore\uff09",isFormEncoded:"Is Form Encoded"}},ke=(o=Object(Y["connect"])(function(e){var t=e.apiCreateModel,a=e.loading;return{apiService:t.apiService,submitting:a.effects["apiCreateModel/submitStepForm"]}}),c=D["a"].create(),o(s=c((i=function(e){function t(){var e,a;C()(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return a=x()(this,(e=N()(t)).call.apply(e,[this].concat(n))),a.state={width:"100%",apiFlowData:{}},a.isBlock=!0,a.getApi=function(e){var t=a.props.dispatch;if(-1!==e){var r={option:4,data:{}};r.data.info={},r.data.info.apiId=e,t({type:"apiCreateModel/apiInfo",payload:r,callback:function(e){a.setBaseInfo(e,t)}})}else O.a.push("/exception/403")},a.setBaseInfo=function(e){var t=a.props.form,r=e.data,n=r.apiServiceBackends.find(function(e){return e.backendType===he}),l=n.apiServiceBackendAttrs,o=Object(ue["a"])(l),c=r.apiServiceBackends.filter(function(e){return e.backendType!==he});Object.keys(t.getFieldsValue()).forEach(function(e){if("members"!==e){if("front"===e||"back"===e||"backAttr"===e){var a={};Object.keys(t.getFieldValue(e)).forEach(function(t){a[t]="front"===e?r[t]||null:"backAttr"===e?"isFormEncoded"===t?o[t]||"N":o[t]||null:n[t]||null});var l={};l[e]=a,t.setFieldsValue(l)}}else{var s={};s[e]=c||[]}})},a.getErrorInfo=function(){var e=[];ye.forEach(function(t){var r=a.getErrorInfoByPrefixList(t)||[];e.push.apply(e,A()(r))});var t=a.getErrorInfoByPrefix(e);return t},a.getErrorInfoByPrefixList=function(e){var t=a.props.form.getFieldError,r=t(e),n=Object.keys(r).filter(function(e){return r[e]}).length;if(!r||0===n)return null;var l=function(t){var a="".concat(e,".").concat(t),r=document.querySelector('label[for="'.concat(a,'"]'));r&&r.scrollIntoView(!0)},o=Object.keys(r).map(function(e){return r[e]?V.a.createElement("li",{key:e,className:$.a.errorListItem,onClick:function(){return l(e)}},V.a.createElement(E["a"],{type:"cross-circle-o",className:$.a.errorIcon}),V.a.createElement("div",{className:$.a.errorMessage},r[e][0]),V.a.createElement("div",{className:$.a.errorField},fe.front[e])):null})||[];return o.filter(function(e){return null!==e})},a.getErrorInfoByPrefix=function(e){var t=e?e.length:0;return 0===t?null:V.a.createElement("span",{className:$.a.errorIcon},V.a.createElement(b["a"],{title:"\u8868\u5355\u6821\u9a8c\u4fe1\u606f",content:e,overlayClassName:$.a.errorPopover,trigger:"click",getPopupContainer:function(e){return e.parentNode}},V.a.createElement(E["a"],{type:"exclamation-circle"})),t)},a.resizeFooterToolbar=function(){requestAnimationFrame(function(){var e=document.querySelectorAll(".ant-layout-sider")[0];if(e){var t="calc(100% - ".concat(e.style.width,")"),r=a.state.width;r!==t&&a.setState({width:t})}})},a.validate=function(){var e=a.props,t=e.form.validateFieldsAndScroll,r=e.apiService,n=e.dispatch;t(function(e,t){if(!e){console.log("==========api update submit values:",t.members);var l=[];t.members.forEach(function(e){e.type!==he&&e.editable&&(e.adapterAttrs&&e.adapterAttrs.forEach(function(t){t.editable&&l.push(e)}),l.push(e))}),l.length>0&&v["a"].warn("Before submitting, please hold or cancel the data in the table that is being modified!",6);var o=Object(pe["g"])(),c=Object(ue["i"])(r,t,o);n({type:"apiCreateModel/submitStepForm",payload:c,callback:function(e){v["a"].success("Submit finished!",6),a.setBaseInfo(e,n),a.isBlock=!1}})}})},a.changeTab=function(e){if(console.log(e),"flow"===e){var t=a.props.form,r=t.getFieldsValue(),n=Object(ue["b"])(r);a.setState({apiFlowData:n})}},a.tableChange=function(e,t){var r=a.props.form,n=r.getFieldValue("backAttr.authType");console.log("tableChange",e,t),"DynaToken"===e&&"in"===t?r.setFieldsValue({"backAttr.authType":"dyncToken"}):"dyncToken"===n&&r.setFieldsValue({"backAttr.authType":""})},a}return K()(t,e),I()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resizeFooterToolbar,{passive:!0});var e=this.props.location,t=e.state,a=t||{apiId:105},r=a.apiId;this.getApi(r)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeFooterToolbar)}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.form,r=a.getFieldDecorator,n=a.getFieldValue,l=e.submitting,o=e.apiService,c=this.state,s=c.width,i=(c.apiFlowData,Object(pe["g"])()),f=o&&o.apiServiceBackends?o.apiServiceBackends.map(function(e){return k()({},e,{key:e.key||e.backendId})}):[],v=f&&f[0]||{},b=v||{callType:"1"},E=b.callType;console.log("xxxoo",v,E);var S=t.getFieldValue("front.serviceType"),A="2"!==S?{display:"none"}:null;return V.a.createElement(_["a"],{onBack:function(){return window.history.back()},style:{height:"50px"},title:"Api Update"},V.a.createElement(L.a,{when:this.isBlock,message:"You do not commit data, are you sure you want to leave?"}),V.a.createElement(p["a"],{title:"\u5b9a\u4e49\u8bf7\u6c42\u4fe1\u606f",className:$.a.card,bordered:!1},V.a.createElement(D["a"],{layout:"vertical",hideRequiredMark:!0},V.a.createElement(h["a"],{gutter:2},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.front.groupId},r("front.groupId",{rules:[{required:!0,message:"please choose\u5206\u7ec4"}]})(V.a.createElement(ie["a"],{hideRoot:!0,treeDefaultExpandAll:!0,isDisabled:1})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.front.name},r("front.name",{rules:[{required:!0,message:"please enter api name"}]})(V.a.createElement(g["a"],{placeholder:"please enter api name"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.front.requestUrl},r("front.requestUrl",{rules:[{required:!0,message:"please choose"}]})(V.a.createElement(g["a"],{style:{width:"100%"},placeholder:"please enter"}))))),V.a.createElement(h["a"],{gutter:2},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.front.serviceType},r("front.serviceType",{rules:[{required:!0,message:"please chooseserviceType"}]})(V.a.createElement(se["a"],{javaCode:"apiService",javaKey:"service_type"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.front.reqMethod},r("front.reqMethod",{rules:[{required:!0,message:"please chooseHTTP Method"}]})(V.a.createElement(se["a"],{javaCode:"common",javaKey:"req_method"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:A},V.a.createElement(D["a"].Item,{label:fe.front.actionName},r("front.actionName",{rules:[{required:"2"===n("front.serviceType"),message:"please enter action name"}]})(V.a.createElement(g["a"],{placeholder:"please enter action name"}))))),V.a.createElement(h["a"],{gutter:2},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:50}},V.a.createElement(D["a"].Item,{label:fe.front.apiType},r("front.apiType",{initialValue:o.apiType,rules:[{required:!0,message:"please choose\u670d\u52a1\u7c7b\u578b"}]})(V.a.createElement(de["a"],{javaCode:"apiService",javaKey:"api_type"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},V.a.createElement("span",null)),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24},V.a.createElement("span",null))))),V.a.createElement(p["a"],{title:"\u843d\u5730\u65b9\u670d\u52a1\u4fe1\u606f",className:$.a.card,bordered:!1},V.a.createElement(D["a"],{layout:"vertical",hideRequiredMark:!0},V.a.createElement(h["a"],{gutter:16},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.callType},r("back.callType",{rules:[{required:!0,message:"please choose ".concat(fe.back.callType)}]})(V.a.createElement(m["a"].Group,null,V.a.createElement(m["a"],{value:1},"External Service"),V.a.createElement(m["a"],{value:2},"Internal MicroService"))))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.serviceType},r("back.serviceType",{rules:[{required:!0,message:"please choose\u540e\u7aef\u670d\u52a1\u7c7b\u578b"}]})(V.a.createElement(se["a"],{javaCode:"apiServiceBackend",javaKey:"service_type"})))),V.a.createElement(y["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.reqMethod},r("back.reqMethod",{rules:[{required:!0,message:"please chooseHTTP Method"}]})(V.a.createElement(se["a"],{javaCode:"common",javaKey:"req_method"}))))),V.a.createElement(h["a"],{gutter:16},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.url},r("back.url",{rules:[{required:!0,message:"please enter\u540e\u7aef\u8bf7\u6c42\u5730\u5740"}]})(V.a.createElement(g["a"],{placeholder:"please enter\u540e\u7aef\u8bf7\u6c42\u5730\u5740"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.reqPath},r("back.reqPath",{rules:[]})(V.a.createElement(g["a"],{placeholder:"please enter\u540e\u7aef\u8bf7\u6c42\u8def\u5f84"})))),V.a.createElement(y["a"],{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.orgId},r("back.orgId",{rules:[{required:!0,message:"please choose".concat(fe.back.orgId)}]})(V.a.createElement(me["a"],{orgType:"0,1",userId:i})))),V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.connectTimeout},r("back.connectTimeout",{rules:[{required:!0,message:"\u540e\u7aef\u670d\u52a1\u8fde\u63a5\u8d85\u65f6"}]})(V.a.createElement(g["a"],{placeholder:"please enter timeout\uff08ms\uff09"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:10},md:{span:24},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.socketTimeout},r("back.socketTimeout",{rules:[{required:!0,message:"\u540e\u7aef\u670d\u52a1\u8bf7\u6c42\u8d85\u65f6"}]})(V.a.createElement(g["a"],{placeholder:"please enter\u540e\u7aef\u670d\u52a1\u8bf7\u6c42\u8d85\u65f6\uff08ms\uff09"})))),V.a.createElement(y["a"],{xl:{span:6,offset:2},lg:{span:10},md:{span:24},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.isFormEncoded},r("backAttr.isFormEncoded",{rules:[{required:!0,message:"please choose".concat(fe.backAttr.isFormEncoded)}]})(V.a.createElement(m["a"].Group,{defaultValue:"N"},V.a.createElement(m["a"],{value:"Y"},"Yes"),V.a.createElement(m["a"],{value:"N"},"No")))))),V.a.createElement(h["a"],{gutter:16},V.a.createElement(y["a"],{xl:{span:16},lg:{span:18},md:{span:24},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.back.authType},r("backAttr.authType",{rules:[{required:!0,message:"please choose ".concat(fe.back.authType)}]})(V.a.createElement(m["a"].Group,null,V.a.createElement(m["a"],{value:"noneAuth"},"No authentication"),V.a.createElement(m["a"],{value:"basicAuth"},"Basic authentication"),V.a.createElement(m["a"],{value:"fixedToken"},"fixed token authentication"),V.a.createElement(m["a"],{value:"dyncToken"},"dynamic token authentication")))))),V.a.createElement(h["a"],{gutter:16,style:{background:"#fff7e6",display:"basicAuth"===n("backAttr.authType")?"block":"none"}},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.userName},r("backAttr.userName",{rules:[{required:"basicAuth"===n("backAttr.authType"),message:"please choose".concat(fe.backAttr.userName)}]})(V.a.createElement(g["a"],null)))),V.a.createElement(y["a"],{xl:{span:16,offset:2},lg:{span:18},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.userPassword},r("backAttr.userPassword",{rules:[{required:"basicAuth"===n("backAttr.authType"),message:"please choose".concat(fe.backAttr.userPassword)}]})(V.a.createElement(g["a"].Password,null))))),V.a.createElement(h["a"],{gutter:16,style:{background:"#fff7e6",display:"fixedToken"===n("backAttr.authType")?"block":"none"}},V.a.createElement(y["a"],{lg:8,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.tokenKey},r("backAttr.tokenKey",{rules:[{required:"fixedToken"===n("backAttr.authType"),message:"please choose".concat(fe.backAttr.tokenKey)}]})(V.a.createElement(g["a"],null)))),V.a.createElement(y["a"],{lg:16,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.tokenStr},r("backAttr.tokenStr",{rules:[{required:"fixedToken"===n("backAttr.authType"),message:"please choose".concat(fe.backAttr.tokenStr)}]})(V.a.createElement(g["a"],null))))),V.a.createElement(h["a"],{gutter:16},V.a.createElement(y["a"],{lg:6,md:12,sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.ssl},r("backAttr.ssl",{rules:[{required:!0,message:"please choose".concat(fe.backAttr.ssl)}]})(V.a.createElement(m["a"].Group,null,V.a.createElement(m["a"],{value:"open"},"\u5f00"),V.a.createElement(m["a"],{value:"close"},"\u5173")))))),V.a.createElement(h["a"],{gutter:16,style:{background:"#fff7e6",display:"open"===n("backAttr.ssl")?"block":"none"}},V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.keyStore},r("backAttr.keyStore",{rules:[{required:"open"===n("backAttr.ssl"),message:"please choose".concat(fe.backAttr.keyStore)}]})(V.a.createElement(g["a"].Password,null)))),V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.keyStorePassword},r("backAttr.keyStorePassword",{rules:[{required:"open"===n("backAttr.ssl"),message:"please choose".concat(fe.backAttr.keyStorePassword)}]})(V.a.createElement(g["a"],null))))),V.a.createElement(h["a"],{gutter:16,style:{background:"#fff7e6",display:"open"===n("backAttr.ssl")?"block":"none"}},V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.trustStore},r("backAttr.trustStore",{rules:[{required:"open"===n("backAttr.ssl"),message:"please choose".concat(fe.backAttr.trustStore)}]})(V.a.createElement(g["a"],null)))),V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.trustStorePassword},r("backAttr.trustStorePassword",{rules:[{required:"open"===n("backAttr.ssl"),message:"please choose".concat(fe.backAttr.trustStorePassword)}]})(V.a.createElement(g["a"],null))))),V.a.createElement(h["a"],{gutter:16,style:{background:"#fff7e6",display:"open"===n("backAttr.ssl")?"block":"none"}},V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.isNotValidCert},r("backAttr.isNotValidCert",{rules:[{required:"open"===n("backAttr.ssl"),message:"please choose".concat(fe.backAttr.isNotValidCert)}]})(V.a.createElement(m["a"].Group,{defaultValue:"N"},V.a.createElement(m["a"],{value:"Y"},"Yes"),V.a.createElement(m["a"],{value:"N"},"No"))))),V.a.createElement(y["a"],{xl:{span:12},lg:{span:12},md:{span:12},sm:24,style:{height:80}},V.a.createElement(D["a"].Item,{label:fe.backAttr.privateKeyName},r("backAttr.privateKeyName",{rules:[]})(V.a.createElement(g["a"],null))))))),V.a.createElement(R["a"],{defaultActiveKey:"1",onChange:this.changeTab},V.a.createElement(ge,{tab:"\u9ad8\u7ea7\u914d\u7f6e",key:"table"},V.a.createElement(p["a"],{bordered:!1},r("members",{initialValue:f})(V.a.createElement(ce,{tableChange:this.tableChange}))))),V.a.createElement(d["a"],null),V.a.createElement(U["a"],{style:{width:s},extra:this.getErrorInfo(),extra2:""},V.a.createElement(u["a"],{style:{width:220},type:"primary",onClick:this.validate,loading:l},"\u63d0\u4ea4"),V.a.createElement(u["a"],{style:{width:220},onClick:function(){return window.history.back()}},"\u8fd4\u56de")))}}]),t}(B["PureComponent"]),s=i))||s)||s);t["default"]=ke}}]);